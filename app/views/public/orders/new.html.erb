<div class="container py-4">
    <h4 class="text-center my-4"><strong>注文情報入力</strong></h4>

      <div>
        <% if @order.errors.any? %>
          <%= @order.errors.count %>件のエラーが発生しました
          <ul>
            <% @order.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        <% elsif @address_new %>
          <ul>
            <% @address_new.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        <% end %>
      </div>

      <div class="row">
        <div class="col">
          <%= form_with model: @order, url:orders_confirm_path do |f| %>
            <table class="table table-borderless" style="margin: auto;">
              <tr>
                <th style="vertical-align: middle; text-align: center;">
                  <h5><strong>支払い方法</strong></h5>
                </th>
                <td>
                  <!--下記はenumを使用している-->
                  <%= f.radio_button :payment_method, Order.payment_methods.key(0) %>
                  <%= f.label :payment_method, Order.payment_methods_i18n[:credit_card] %>
                  <br>
                  <%= f.radio_button :payment_method, Order.payment_methods.key(1) %>
                   <%= f.label :payment_method, Order.payment_methods_i18n[:transfer]%>
                </td>
              </tr>

              <tr>
                <th style="vertical-align: middle;text-align: center;">
                  <h5><strong>お届け先</strong></h5>
                </th>
                <td>
                  <p><%= f.radio_button :select_address, 0 %>ご自身の住所</p>
                  <p><%= current_customer.address_display %><p>
                </td>
              </tr>

              <tr>
                <th></th>
                <td>
                  <div class="mb-3">
                    <p><%= f.radio_button:select_address, 1 %>登録済み住所</p>
                    <%= f.select :address_id, options_from_collection_for_select(@addresses, :id, :address_display) %> <br>
                  </div>
                </td>
              </tr>

              <tr>
                <th></th>
                <td>
                  <div class="mb-3">
                    <p><%= f.radio_button:select_address, 2 %>新しいお届け先</p>
                      <table>
                        <tr>
                          <th><%= f.label "郵便番号(ハイフンなし)" %></th>
                          <td><%= f.text_field :postal_code,placeholder: "0000000" %></td>
                        </tr>

                        <tr>
                          <th><%= f.label "住所" %></th>
                          <td><%= f.text_field :address, placeholder: "東京都xx区xxx町0-0", size: "50x5"%></td>
                        </tr>

                        <tr>
                          <th><%= f.label "宛名" %></th>
                          <td><%= f.text_field :name, placeholder: "山田太郎"%></td>
                        </tr>
                      </table>
                  </div>
                </td>
              </tr>
            </table>

            <div style="text-align:center;">
              <%= f.submit "確認画面へ進む", class: 'btn btn-primary' %>
            </div>
          <% end %>
        </div>
      </div>
</div>